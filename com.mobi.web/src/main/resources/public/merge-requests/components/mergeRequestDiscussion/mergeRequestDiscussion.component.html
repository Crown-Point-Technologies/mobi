<!--
  #%L
  com.mobi.web
  $Id:$
  $HeadURL:$
  %%
  Copyright (C) 2016 - 2019 iNovex Information Systems, Inc.
  %%
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  #L%
  -->
<div class="merge-request-discussion py-2">
    <div class="comment-chain" ng-repeat="chain in dvm.request.comments" ng-class="{'mt-3': !$first}">
        <comment-display ng-repeat="comment in chain track by comment['@id']" class="mt-3" comment="comment" is-reply="$index > 0" request="dvm.request" update-request="dvm.updateRequest(value)" ng-class="{'reply': $index > 0}"></comment-display>
        <reply-comment ng-if="!dvm.mm.isAccepted(dvm.request.jsonld)" ng-class="{'reply': chain.length > 1}" parent-id="chain[0]['@id']" request="dvm.request" update-request="dvm.updateRequest({value: value})"></reply-comment>
    </div>
    <div class="new-comment pt-3 clearfix" ng-if="!dvm.mm.isAccepted(dvm.request.jsonld)">
        <h6>New Comment</h6>
        <markdown-editor bind-model="dvm.newComment" change-event="dvm.newComment = value" place-holder="'Write your comment here...'" click-event="dvm.comment()" button-text="'Comment'"></markdown-editor>
    </div>
</div>