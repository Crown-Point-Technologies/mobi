<blueprint default-activation="eager"
           xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
    <!-- User Authorization Context -->
    <bean id="userContext" class="org.matonto.web.authentication.GenerateTokenHttpContext">
        <property name="bundle" ref="blueprintBundle"/>
    </bean>
    <service id="userContextService" ref="userContext" interface="org.osgi.service.http.HttpContext">
        <service-properties>
            <entry key="httpContext.id" value="userCtxId"/>
        </service-properties>
    </service>

    <!-- User Servlet -->
    <bean id="userServlet" class="org.matonto.web.authentication.UserServlet"/>
    <service id="userServletService" ref="userServlet" interface="javax.servlet.Servlet">
        <service-properties>
            <entry key="alias" value="/matontorest/user/current"/>
            <entry key="httpContext.id" value="userCtxId"/>
        </service-properties>
    </service>

    <!-- UI Authorization Context -->
    <bean id="uiContext" class="org.matonto.web.authentication.UITokenHttpContext">
        <property name="bundle" ref="blueprintBundle"/>
    </bean>
    <service id="uiContextService" ref="uiContext" interface="org.osgi.service.http.HttpContext">
        <service-properties>
            <entry key="httpContext.id" value="uiCtxId"/>
        </service-properties>
    </service>

    <!-- Resources -->
    <service id="cssResources" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
        <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
            <property name="alias" value="/matonto/css" />
            <property name="path" value="build/css" />
        </bean>
    </service>

    <service id="imageResources" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
        <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
            <property name="alias" value="/matonto/images" />
            <property name="path" value="build/images" />
        </bean>
    </service>

    <service id="jsResources" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
        <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
            <property name="alias" value="/matonto/js" />
            <property name="path" value="build/js" />
        </bean>
    </service>

    <service id="moduleResources" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
        <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
            <property name="alias" value="/matonto/modules" />
            <property name="path" value="build/modules" />
        </bean>
    </service>

    <service id="rootResources" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
        <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
            <property name="alias" value="/matonto" />
            <property name="path" value="build" />
            <property name="httpContextId" value="uiCtxId"/>
        </bean>
    </service>
</blueprint>
