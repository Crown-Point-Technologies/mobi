<blueprint default-activation="eager"
           xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
    <!-- User Authorization Contexts -->
    <bean id="userCurrentContext" class="org.matonto.web.authentication.context.UserCurrentTokenContext">
        <property name="bundle" ref="blueprintBundle"/>
    </bean>
    <service id="userCurrentContextService" ref="userCurrentContext" interface="org.osgi.service.http.HttpContext">
        <service-properties>
            <entry key="httpContext.id" value="userCurrentCtxId"/>
        </service-properties>
    </service>

    <bean id="userLoginContext" class="org.matonto.web.authentication.context.UserLoginTokenContext">
        <property name="bundle" ref="blueprintBundle"/>
    </bean>
    <service id="userLoginContextService" ref="userLoginContext" interface="org.osgi.service.http.HttpContext">
        <service-properties>
            <entry key="httpContext.id" value="userLoginCtxId"/>
        </service-properties>
    </service>

    <bean id="userLogoutContext" class="org.matonto.web.authentication.context.UserLogoutTokenContext">
        <property name="bundle" ref="blueprintBundle"/>
    </bean>
    <service id="userLogoutContextService" ref="userLogoutContext" interface="org.osgi.service.http.HttpContext">
        <service-properties>
            <entry key="httpContext.id" value="userLogoutCtxId"/>
        </service-properties>
    </service>

    <!-- User Servlets -->
    <bean id="userCurrentServlet" class="org.matonto.web.authentication.UserServlet"/>
    <service id="userCurrentServletService" ref="userCurrentServlet" interface="javax.servlet.Servlet">
        <service-properties>
            <entry key="alias" value="/matontorest/user/current"/>
            <entry key="httpContext.id" value="userCurrentCtxId"/>
        </service-properties>
    </service>

    <bean id="userLoginServlet" class="org.matonto.web.authentication.UserServlet"/>
    <service id="userLoginServletService" ref="userLoginServlet" interface="javax.servlet.Servlet">
        <service-properties>
            <entry key="alias" value="/matontorest/user/login"/>
            <entry key="httpContext.id" value="userLoginCtxId"/>
        </service-properties>
    </service>

    <bean id="userLogoutServlet" class="org.matonto.web.authentication.UserServlet"/>
    <service id="userLogoutServletService" ref="userLogoutServlet" interface="javax.servlet.Servlet">
        <service-properties>
            <entry key="alias" value="/matontorest/user/logout"/>
            <entry key="httpContext.id" value="userLogoutCtxId"/>
        </service-properties>
    </service>

    <!--&lt;!&ndash; User Filter &ndash;&gt;`-->
    <!--<service id="verifyTokenFilter" interface="javax.servlet.Filter" ranking="3">-->
        <!--<service-properties>-->
            <!--<entry key="urlPatterns" value="/matontorest/user/current"/>-->
        <!--</service-properties>-->
        <!--<bean class="org.matonto.web.authentication.filter.VerifyToken"/>-->
    <!--</service>-->

    <!--<service id="genUnauthTokenFilter" interface="javax.servlet.Filter" ranking="2">-->
        <!--<service-properties>-->
            <!--<entry key="urlPatterns" value="/matontorest/user/current"/>-->
            <!--<entry key="init.skipIfTokenExists" value="true"/>-->
        <!--</service-properties>-->
        <!--<bean class="org.matonto.web.authentication.filter.GenerateUnauthToken"/>-->
    <!--</service>-->

    <!--<service id="writePayloadFilter" interface="javax.servlet.Filter" ranking="1">-->
        <!--<service-properties>-->
            <!--<entry key="urlPatterns" value="/matontorest/user/current"/>-->
        <!--</service-properties>-->
        <!--<bean class="org.matonto.web.authentication.filter.WritePayload"/>-->
    <!--</service>-->

    <!-- REST Authorization Context -->
    <bean id="restContext" class="org.matonto.web.authentication.context.RestTokenContext">
        <property name="bundle" ref="blueprintBundle"/>
    </bean>
    <service id="restContextService" ref="restContext" interface="org.osgi.service.http.HttpContext">
        <service-properties>
            <entry key="httpContext.id" value="restCtxId"/>
        </service-properties>
    </service>

    <!-- UI Authorization Context -->
    <bean id="uiContext" class="org.matonto.web.authentication.context.UITokenContext">
        <property name="bundle" ref="blueprintBundle"/>
    </bean>
    <service id="uiContextService" ref="uiContext" interface="org.osgi.service.http.HttpContext">
        <service-properties>
            <entry key="httpContext.id" value="uiCtxId"/>
        </service-properties>
    </service>

    <!-- Resources -->
    <service id="cssResources" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
        <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
            <property name="alias" value="/matonto/css" />
            <property name="path" value="build/css" />
        </bean>
    </service>

    <service id="imageResources" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
        <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
            <property name="alias" value="/matonto/images" />
            <property name="path" value="build/images" />
        </bean>
    </service>

    <service id="jsResources" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
        <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
            <property name="alias" value="/matonto/js" />
            <property name="path" value="build/js" />
        </bean>
    </service>

    <service id="moduleResources" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
        <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
            <property name="alias" value="/matonto/modules" />
            <property name="path" value="build/modules" />
        </bean>
    </service>

    <service id="rootResources" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
        <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
            <property name="alias" value="/matonto" />
            <property name="path" value="build" />
            <property name="httpContextId" value="uiCtxId"/>
        </bean>
    </service>
</blueprint>
