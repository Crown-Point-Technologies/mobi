<!-- inner property template -->
<script type="text/ng-template" id="property-template">
    <a ng-click="vm.selectItem('property-editor', oi, ci, $index)"
       ng-class="{'unsaved': property.matonto.unsaved, 'active': vm.state.oi === oi && vm.state.ci === ci && vm.state.pi === $index}">
        <i class="fa fa-fw {{property.matonto.icon}}"
        ></i>{{property[ontology.matonto.rdfs + 'label'][0]['@value'] || ((property['@id'] | splitIRI).end | beautify)}}
        <i ng-show="property.matonto.unsaved" class="fa fa-exclamation unsaved-icon pull-right"></i>
    </a>
</script>

<!-- object property template -->
<script type="text/ng-template" id="object-property-template">
    <li ng-repeat="property in properties" ng-if="vm.typeMatch(property, ontology.matonto.owl, 'ObjectProperty')" ng-include="'property-template'"></li>
</script>

<!-- datatype property template -->
<script type="text/ng-template" id="datatype-property-template">
    <li ng-repeat="property in properties" ng-if="vm.typeMatch(property, ontology.matonto.owl, 'DataTypeProperty') || vm.typeMatch(property, ontology.matonto.owl, 'DatatypeProperty')" ng-include="'property-template'"></li>
</script>

<!-- ontology-editor.html -->
<div class="ontology-editor clearfix" ng-controller="OntologyEditorController as vm">
    <div class="row">
        <!-- navigation structure -->
        <aside class="col-xs-4">
            <div class="tree-container boxed">
                <!-- tab buttons -->
                <div class="btn-group btn-group-justified" role="group">
                    <tab-button is-active="vm.state.tab === 'everything'"
                                on-click="vm.setTreeTab('everything')"
                                display-text="'Tree'"></tab-button>

                    <tab-button is-active="vm.state.tab === 'class'"
                                on-click="vm.setTreeTab('class')"
                                display-text="'Class'"></tab-button>

                    <tab-button is-active="vm.state.tab === 'object'"
                                on-click="vm.setTreeTab('object')"
                                display-text="'Object'"></tab-button>

                    <tab-button is-active="vm.state.tab === 'datatype'"
                                on-click="vm.setTreeTab('datatype')"
                                display-text="'Data'"></tab-button>
                </div>

                <everything-tree ng-if="vm.state.tab === 'everything'"></everything-tree>

                <class-tree ng-if="vm.state.tab === 'class'"></class-tree>

                <property-tree ng-if="vm.state.tab === 'object'"
                               property-type="objectproperty"></property-tree>

                <property-tree ng-if="vm.state.tab === 'datatype'"
                               property-type="datatypeproperty"></property-tree>
            </div>
        </aside>

        <!-- edit/create form section -->
        <section class="col-xs-8">
            <div class="editor boxed">
                <!-- default -->
                <div ng-if="vm.state.editor === 'default'" class="tab default">
                    <p class="lead">Welcome to the Ontology Editor!</p>
                    <p>Click an item in the left pane to get started. This pane will then update accordingly.</p>
                </div>

                <ontology-editor ng-if="vm.state.editor === 'ontology-editor'"></ontology-editor>

                <class-editor ng-if="vm.state.editor === 'class-editor'"></class-editor>

                <property-editor ng-if="vm.state.editor === 'property-editor'"></property-editor>

                <iri-overlay ng-if="vm.showIriOverlay"></iri-overlay>

                <ontology-upload-overlay ng-if="vm.showUploadOverlay"></ontology-upload-overlay>

                <annotation-overlay ng-if="vm.showAnnotationOverlay"></annotation-overlay>
            </div>
        </section>
    </div>
    <pre>{{vm.selected | removeMatonto | json}}</pre>
    <circle-button ng-if="vm.state.editor !== 'default'"
                   on-click="vm.submitEdit()"
                   btn-icon="'fa-floppy-o'"
                   is-enabled="vm.selected.matonto.unsaved"></circle-button>
</div>
